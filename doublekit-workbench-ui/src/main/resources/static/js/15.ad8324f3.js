(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{406:function(e,t,a){"use strict";a.r(t);var r=a(176),n=a.n(r),o=(a(248),a(247)),l=(a(241),a(243)),c=(a(132),a(63)),i=(a(242),a(244)),s=(a(246),a(245)),u=a(10),m=a.n(u),d=a(41),p=a.n(d),b=(a(254),a(255)),f=a(0),g=a.n(f),O=a(133),y=a(68),v=a(88),E=a(252),j=(a(250),a(249)),h=(a(260),a(257)),P=(a(253),a(251));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S={labelCol:{span:6},wrapperCol:{span:18}},D=function(e){var t=e.visible,a=e.onCancel,r=e.listParams,o=e.isEdit,l=void 0!==o&&o,c=e.data,i=void 0===c?{}:c,u=e.getList,m=P.a.useForm(),d=p()(m,1)[0],b=Object(y.a)().t;Object(f.useEffect)((function(){l&&(d.setFieldsValue({name:i.name}),d.setFieldsValue({phone:i.phone}),d.setFieldsValue({email:i.email}),d.setFieldsValue({userType:i.userType}))}),[l,i]);var O=function(){d.resetFields(),a()};return g.a.createElement(j.a,{title:b("orga-label.addUser"),visible:t,onOk:function(){d.submit()},onCancel:O,closable:!1,destroyOnClose:!0},g.a.createElement(P.a,n()({},S,{form:d,onFinish:function(e){var t="user/createUser",a=e;l&&(a=k(k({},e),{},{id:i.id}),t="user/updateUser"),v.a.post(t,a).then((function(e){e.code||(u(r),O())}))},preserve:!1}),g.a.createElement(P.a.Item,{label:b("orga-table.surname"),name:"name",rules:[{required:!0,message:b("orga-table.nameRequired")}]},g.a.createElement(s.a,null)),g.a.createElement(P.a.Item,{label:b("orga-table.phone"),name:"phone",rules:[{required:!0,message:b("orga-table.phoneRequired")}]},g.a.createElement(s.a,null)),g.a.createElement(P.a.Item,{label:b("orga-table.email"),name:"email",rules:[{required:!0,message:b("orga-table.emailRequired")}]},g.a.createElement(s.a,null)),g.a.createElement(P.a.Item,{label:b("orga-label.userType"),name:"userType",rules:[{required:!0,message:b("orga-table.userTypeRequired")}]},g.a.createElement(h.a,null,g.a.createElement(h.a.Option,{key:"1",value:1},b("orga-table.internal")),g.a.createElement(h.a.Option,{key:"2",value:2},b("orga-table.thirdparty"))))))},I=Object(f.memo)(D),U=a(126);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=function(e){var t=e.domainId,a=e.domainUserStore,r=a.getDomainUser,u=a.deleteDomainUser,m=a.privilegeDomainUsers,d=Object(y.a)().t,O=[{title:d("orga-table.surname"),dataIndex:["user","name"],key:"name"},{title:d("orga-table.phone"),dataIndex:["user","phone"],key:"phone"},{title:d("orga-table.email"),dataIndex:["user","email"],key:"email"},{title:d("orga-table.org"),dataIndex:["user","org"],key:"org",width:"20%"},{title:d("orga-table.type"),dataIndex:["user","userType"],key:"userType",width:"15%",render:function(e){switch(e){case 2:return d("orga-table.thirdparty");case 1:return d("orga-table.internal");default:return"--"}}},{title:d("orga-common.action"),key:"action",width:"10%",render:function(e,t){return g.a.createElement(b.b,{size:"middle"},g.a.createElement("a",{onClick:function(){return Q(t.id)}},d("orga-common.delete")))}}],j=Object(f.useState)(!1),h=p()(j,2),P=h[0],w=h[1],k=Object(f.useState)(""),S=p()(k,2),D=S[0],U=S[1],C=Object(f.useState)(10),T=p()(C,1)[0],q=Object(f.useState)(1),F=p()(q,2),R=F[0],z=F[1],N=Object(f.useState)(0),V=p()(N,2),L=V[0],A=V[1],J=Object(f.useState)({domainId:t,pageParam:{pageSize:T,currentPage:R}}),K=p()(J,2),M=K[0],B=K[1],G=Object(f.useRef)(null);Object(f.useEffect)((function(){return G.current=!0,H(M),function(){G.current=!1}}),[M]);var H=function(e){v.a.post("/dmUser/findDmUserPage",e).then((function(e){!e.code&&G.current&&(A(e.data.totalRecord),r(e.data.dataList))}))},Q=function(e){var t=new FormData;t.append("id",e),v.a.post("/dmUser/deleteDmUser",t).then((function(t){t.code||(u(e),L-1<T*(R-1)+1&&(z(1===R?1:R-1),B({pageParam:{pageSize:T,currentPage:1===R?1:R-1}})),A(L-1))}))},W=Object(f.useCallback)((function(){w(!1),H(M)}),[]);return g.a.createElement("div",{className:"privilege-domain-user"},g.a.createElement(l.a,{justify:"center"},g.a.createElement(i.a,{xl:{span:20},lg:{span:24},xxl:{span:16}},g.a.createElement(E.b,{routes:[{disabled:!0,breadcrumbName:"成员管理 "},{path:"first",breadcrumbName:"成员列表"}]}),g.a.createElement("div",{className:"privilege-domain-user-container"},g.a.createElement(l.a,null,g.a.createElement(i.a,{span:6},g.a.createElement(s.a,{placeholder:d("orga-label.searchUserPhoneEmail"),value:D,onChange:function(e){return U(e.target.value)},onPressEnter:function(e){}})),g.a.createElement(i.a,{span:18},g.a.createElement("div",{className:"privilege-domain-user-btn"},g.a.createElement(c.a,{onClick:function(){return w(!0)}},"+",d("orga-label.addUser"))))),g.a.createElement(l.a,null,g.a.createElement(i.a,{span:24},g.a.createElement(o.a,{columns:O,dataSource:m,rowKey:function(e){return e.id},tableLayout:"fixed",pagination:{current:R,pageSize:T,total:L},onChange:function(e,t,a){return function(e,t,a){var r=[];z(e.current),Array.isArray(a)?r=a.map((function(e){return{name:e.field,sortType:void 0!==e.order?"ascend"===e.order?"asc":"desc":void 0}})):a.field&&r.push({name:a.field,sortType:void 0!==a.order?"ascend"===a.order?"asc":"desc":void 0});var n=x(x({},M),{},{orderParams:r,pageParam:{pageSize:T,currentPage:e.current}});B(n)}(e,0,a)}})))))),Object(f.useMemo)((function(){return g.a.createElement(I,n()({},e,{domainId:t,visible:P,params:M,onCancel:W}))}),[P]))};t.default=Object(O.b)(U.a)(Object(O.c)((function(e){return g.a.createElement("div",null,g.a.createElement(T,n()({},e,{domainId:"111"})))})))}}]);