(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{400:function(e,t,n){"use strict";n.r(t);n(241);var a=n(243),r=(n(242),n(244)),c=n(176),i=n.n(c),l=n(10),u=n.n(l),o=n(41),s=n.n(o),p=n(0),d=n.n(p),f=n(133),b=n(88),m=n(252),v=n(116),O=n(68),j=n(263),g=function(e){var t=e.data,n=Object(O.a)().t;return d.a.createElement("div",{className:"privilege-detail"},d.a.createElement(j.a,i()({},e,{routes:[{disabled:!0,breadcrumbName:"功能管理 "},{path:"first",breadcrumbName:"功能详情"}]})),d.a.createElement("div",{className:"privilege-detail-content"},d.a.createElement(a.a,null,d.a.createElement(r.a,{span:6},d.a.createElement("div",{className:"privilege-detail-content-item"},d.a.createElement("label",null,n("privilege-feature-name"),":"),d.a.createElement("span",null,t.name)))),d.a.createElement(a.a,null,d.a.createElement(r.a,{span:6},d.a.createElement("div",{className:"privilege-detail-content-item"},d.a.createElement("label",null,n("privilege-feature-code"),":"),d.a.createElement("span",null,t.code))))))};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=Object(f.b)(v.a)(Object(f.c)((function(e){var t=e.privilegeSystemStore,n=t.privilegeSystemTreeData,c=t.getPrivilegeTree,l=Object(p.useState)(""),u=s()(l,2),o=u[0],f=u[1],v=Object(p.useState)(!1),O=s()(v,2),j=O[0],E=O[1],y=Object(p.useState)({}),w=s()(y,2),S=w[0],P=w[1],k=Object(p.useState)({}),D=s()(k,2),F=D[0],N=D[1],C=Object(p.useState)(""),T=s()(C,2),x=T[0],A=T[1],B=Object(p.useRef)(null);Object(p.useEffect)((function(){return B.current=!0,L(),function(){return B.current=!1}}),[]);var J={pageSize:99999,currentPage:1},L=function(){b.a.post("function/findFunctionList",J).then((function(e){if(!e.code&&B.current){var t=M(e.data);c(t),t.length>0?(N(t[0]),A(t[0].id)):(N({}),A(""))}}))},M=function(e){var t=e.map((function(e){return!e.parentFunction&&e})).filter(Boolean),n=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&e})).filter(Boolean),a=[];return t.forEach((function(e){var t=e.id,r=n.filter((function(e){return e.parentFunction.id===t}));a.push(h(h({},e),{},{children:r}))})),a},z=Object(p.useCallback)((function(e){var t=new FormData;N(e),A(e.id),t.append("id",e.id)}),[]),I=Object(p.useCallback)((function(e){f(e),E(!0)}),[]),R=Object(p.useCallback)((function(){f(""),P({}),E(!1),b.a.post("function/findFunctionList",J).then((function(e){if(!e.code){var t=M(e.data);if(c(t),t.length>0){var n=t.filter((function(e){return e.id===x}));n.length>0&&N(n[0])}}}))}),[]),q=Object(p.useCallback)((function(e){P(e),E(!0)}),[]),G=Object(p.useCallback)((function(e){var t=new FormData;t.append("id",e.id),b.a.post("function/deleteFunction",t).then((function(e){e.code||L()}))}),[]);return d.a.createElement("div",{className:"privilege"},d.a.createElement(a.a,{justify:"center",className:"privilege-wrap"},d.a.createElement(r.a,{xl:{span:24},xxl:{span:16}},d.a.createElement("div",{className:"privilege-parent"},Object(p.useMemo)((function(){return d.a.createElement(m.c,i()({data:n,onSelect:z},e,{addClick:E,onDelete:G,onEdit:q,onAddChildrenTree:I,defaultCurrent:x}))}),[n]),d.a.createElement(g,i()({},e,{data:F}))))),Object(p.useMemo)((function(){return d.a.createElement(m.a,i()({},e,{editData:S,visible:j,cancelAdd:R,parentId:o,urlType:"system"}))}),[j]))})))}}]);