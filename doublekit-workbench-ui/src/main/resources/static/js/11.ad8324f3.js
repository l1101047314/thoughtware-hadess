(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{399:function(e,t,n){"use strict";n.r(t);n(241);var a=n(243),r=(n(242),n(244)),c=n(176),i=n.n(c),l=n(10),u=n.n(l),o=n(41),p=n.n(o),s=n(0),d=n.n(s),f=n(133),b=n(88),m=n(252),j=n(68),v=function(e){var t=Object(j.a)().t,n=e.data;return d.a.createElement("div",{className:"privilege-detail"},d.a.createElement(m.b,i()({},e,{routes:[{disabled:!0,breadcrumbName:"功能管理 "},{path:"first",breadcrumbName:"功能详情"}]})),d.a.createElement("div",{className:"privilege-detail-content"},d.a.createElement(a.a,null,d.a.createElement(r.a,{span:6},d.a.createElement("div",{className:"privilege-detail-content-item"},d.a.createElement("label",null,t("privilege-feature-name"),":"),d.a.createElement("span",null,n.name)))),d.a.createElement(a.a,null,d.a.createElement(r.a,{span:6},d.a.createElement("div",{className:"privilege-detail-content-item"},d.a.createElement("label",null,t("privilege-feature-code"),":"),d.a.createElement("span",null,n.code))))))},O=n(117);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=Object(f.b)(O.a)(Object(f.c)((function(e){var t=e.privilegeProjectFeatureStore,n=t.privilegeProjectTreeData,c=t.getDmPrivilegeTree,l=Object(s.useState)(""),u=p()(l,2),o=u[0],f=u[1],j=Object(s.useState)(!1),O=p()(j,2),g=O[0],h=O[1],w=Object(s.useState)({}),P=p()(w,2),y=P[0],F=P[1],D=Object(s.useState)({}),S=p()(D,2),k=S[0],N=S[1],C=Object(s.useState)(""),T=p()(C,2),x=T[0],A=T[1],B=Object(s.useRef)(null);Object(s.useEffect)((function(){return B.current=!0,L(),function(){return B.current=!1}}),[]);var J={pageSize:99999,currentPage:1},L=function(){b.a.post("prjFunction/findPrjFunctionList",J).then((function(e){if(!e.code&&B.current){var t=M(e.data);c(t),t.length>0?(N(t[0]),A(t[0].id)):(N({}),A(""))}}))},M=function(e){var t=e.map((function(e){return!e.parentFunction&&e})).filter(Boolean),n=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&e})).filter(Boolean),a=[];return t.forEach((function(e){var t=e.id,r=n.filter((function(e){return e.parentFunction.id===t}));a.push(E(E({},e),{},{children:r}))})),a},z=Object(s.useCallback)((function(e){var t=new FormData;N(e),A(e.id),t.append("id",e.id)}),[]),I=Object(s.useCallback)((function(e){f(e),h(!0)}),[]),R=Object(s.useCallback)((function(){f(""),F({}),h(!1),b.a.post("prjFunction/findPrjFunctionList",J).then((function(e){if(!e.code){var t=M(e.data);if(c(t),t.length>0){var n=t.filter((function(e){return e.id===x}));n.length>0&&N(n[0])}}}))}),[]),q=Object(s.useCallback)((function(e){F(e),h(!0)}),[]),G=Object(s.useCallback)((function(e){var t=new FormData;t.append("id",e.id),b.a.post("prjFunction/deletePrjFunction",t).then((function(e){e.code||L()}))}),[]);return d.a.createElement("div",{className:"privilege-dm"},d.a.createElement(a.a,{justify:"center",className:"privilege-dm-wrap"},d.a.createElement(r.a,{xxl:{span:16},xl:{span:24}},d.a.createElement("div",{className:"privilege-dm-parent"},Object(s.useMemo)((function(){return d.a.createElement(m.c,i()({data:n,onSelect:z},e,{addClick:h,onDelete:G,onEdit:q,onAddChildrenTree:I,defaultCurrent:x}))}),[n]),d.a.createElement(v,i()({},e,{data:k}))))),Object(s.useMemo)((function(){return d.a.createElement(m.a,i()({},e,{editData:y,visible:g,cancelAdd:R,parentId:o,urlType:"project"}))}),[g]))})))}}]);