(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{405:function(e,t,a){"use strict";a.r(t);var r=a(176),n=a.n(r),o=(a(248),a(247)),l=(a(241),a(243)),c=(a(132),a(63)),i=(a(242),a(244)),s=(a(246),a(245)),u=a(10),d=a.n(u),m=(a(254),a(255)),p=a(41),b=a.n(p),g=(a(259),a(256)),f=a(0),O=a.n(f),y=a(133),E=a(139),j=a(88),v=a(68),P=a(252),h=(a(250),a(249)),w=(a(260),a(257)),k=(a(253),a(251));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var U={labelCol:{span:6},wrapperCol:{span:18}},T=function(e){var t=e.visible,a=e.onCancel,r=e.listParams,o=e.isEdit,l=void 0!==o&&o,c=e.data,i=void 0===c?{}:c,u=e.getList,d=k.a.useForm(),m=b()(d,1)[0],p=Object(v.a)().t;Object(f.useEffect)((function(){l&&(m.setFieldsValue({name:i.name}),m.setFieldsValue({phone:i.phone}),m.setFieldsValue({email:i.email}),m.setFieldsValue({userType:i.userType}))}),[l,i]);var g=function(){m.resetFields(),a()};return O.a.createElement(h.a,{title:p("orga-label.addUser"),visible:t,onOk:function(){m.submit()},onCancel:g,closable:!1,destroyOnClose:!0},O.a.createElement(k.a,n()({},U,{form:m,onFinish:function(e){var t="user/createUser",a=e;l&&(a=S(S({},e),{},{id:i.id}),t="user/updateUser"),j.a.post(t,a).then((function(e){e.code||(u(r),g())}))},preserve:!1}),O.a.createElement(k.a.Item,{label:p("orga-table.surname"),name:"name",rules:[{required:!0,message:p("orga-table.nameRequired")}]},O.a.createElement(s.a,null)),O.a.createElement(k.a.Item,{label:p("orga-table.phone"),name:"phone",rules:[{required:!0,message:p("orga-table.phoneRequired")}]},O.a.createElement(s.a,null)),O.a.createElement(k.a.Item,{label:p("orga-table.email"),name:"email",rules:[{required:!0,message:p("orga-table.emailRequired")}]},O.a.createElement(s.a,null)),O.a.createElement(k.a.Item,{label:p("orga-label.userType"),name:"userType",rules:[{required:!0,message:p("orga-table.userTypeRequired")}]},O.a.createElement(w.a,null,O.a.createElement(w.a.Option,{key:"1",value:1},p("orga-table.internal")),O.a.createElement(w.a.Option,{key:"2",value:2},p("orga-table.thirdparty"))))))},D=Object(f.memo)(T),x=a(127);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q=g.a.TabPane,z=function(e){var t=e.userStore,a=(e.addUserPromiseCode,t.userData),r=t.getUserList,u=t.editUser,d=t.addUser,p=t.deleteUser,y=Object(v.a)().t,h=Object(f.useState)(!1),w=b()(h,2),k=w[0],C=w[1],S=Object(f.useState)(!1),U=b()(S,2),T=U[0],x=U[1],I=Object(f.useState)({}),z=b()(I,2),R=z[0],N=z[1],L=Object(f.useState)(10),V=b()(L,1)[0],A=Object(f.useState)(1),J=b()(A,2),K=J[0],B=J[1],G=Object(f.useState)(0),H=b()(G,2),M=H[0],Q=H[1],W=Object(f.useState)({pageParam:{pageSize:V,currentPage:K}}),X=b()(W,2),Y=X[0],Z=X[1],$=Object(f.useState)(""),_=b()($,2),ee=_[0],te=_[1],ae=Object(f.useRef)(null);Object(f.useEffect)((function(){return ae.current=!0,re(Y),function(){return ae.current=!1}}),[Y]);var re=Object(f.useCallback)((function(e){j.a.post("user/findUserPage",e).then((function(e){!e.code&&ae.current&&(Q(e.data.totalRecord),r(e.data.dataList))}))}),[]),ne=[{title:y("orga-table.surname"),dataIndex:"name",key:"name",sorter:{multiple:1}},{title:y("orga-table.phone"),dataIndex:"phone",key:"phone",sorter:{multiple:2}},{title:y("orga-table.email"),dataIndex:"email",key:"email",sorter:{multiple:3}},{title:y("orga-table.org"),dataIndex:"org",key:"org"},{title:y("orga-table.type"),dataIndex:"userType",key:"userType",render:function(e){switch(e){case 1:return y("orga-table.internal");case 2:return y("orga-table.thirdparty");default:return"--"}}},{title:y("orga-common.action"),key:"action",render:function(e,t){return O.a.createElement(m.b,{size:"middle"},O.a.createElement("a",{onClick:function(){return le(t)}},y("orga-common.edit")),O.a.createElement("a",{onClick:function(){return oe(t.id)}},y("orga-common.delete")),O.a.createElement(E.Plugin,{point:"userTable"}))}}],oe=function(e){var t=new FormData;t.append("id",e),j.a.post("user/deleteUser",t).then((function(t){t.code||p(e)}))},le=function(e){var t=new FormData;t.append("id",e.id),j.a.post("user/findUser",t).then((function(e){e.code||(N(e.data),C(!0),x(!0))}))},ce=Object(f.useCallback)((function(e){B(1);var t={pageParam:{pageSize:V,currentPage:1}};e.target.value&&(t={pageParam:{pageSize:V,currentPage:1},keyword:e.target.value}),Z(t)}),[]);return O.a.createElement("div",{className:"user"},O.a.createElement(l.a,{justify:"center",style:{width:"100%"}},O.a.createElement(i.a,{xl:{span:20},lg:{span:24},xxl:{span:16}},O.a.createElement("div",{className:"user-detail"},O.a.createElement(P.b,{routes:[{disabled:!0,breadcrumbName:"用户管理 "},{path:"first",breadcrumbName:"用户列表"}]}),O.a.createElement(l.a,{justify:"space-between"},O.a.createElement(i.a,{span:8},O.a.createElement(s.a,{placeholder:y("orga-label.searchUserAccount"),value:ee,onChange:function(e){return te(e.target.value)},onPressEnter:function(e){return ce(e)}})),O.a.createElement(i.a,{span:8},O.a.createElement("div",{className:"user-detail-buttons"},O.a.createElement(c.a,{onClick:function(){return C(!0)}},"+",y("orga-label.addUser")),O.a.createElement(E.Plugin,{point:"exportUser",extraProps:{userData:a,c:1}})))),O.a.createElement(l.a,null,O.a.createElement(i.a,{span:24},O.a.createElement(g.a,{onChange:function(e){console.log(e)},type:"card"},O.a.createElement(q,{tab:y("orga-tab.all"),key:"1"},O.a.createElement(o.a,{columns:ne,dataSource:a,rowKey:function(e){return e.id},pagination:{current:K,pageSize:V,total:M},onChange:function(e,t,a){return function(e,t,a){var r=[];B(e.current),Array.isArray(a)?r=a.map((function(e){return{name:e.field,sortType:void 0!==e.order?"ascend"===e.order?"asc":"desc":void 0}})):a.field&&r.push({name:a.field,sortType:void 0!==a.order?"ascend"===a.order?"asc":"desc":void 0});var n=F(F({},Y),{},{orderParams:r,pageParam:{pageSize:V,currentPage:e.current}});Z(n)}(e,0,a)}})),O.a.createElement(q,{tab:y("orga-tab.in"),key:"2"},"Content of Tab Pane 2"),O.a.createElement(q,{tab:y("orga-tab.out"),key:"3"},"Content of Tab Pane 3")))),O.a.createElement(D,n()({},e,{visible:k,onCancel:function(){return C(!1)},addUser:d,isEdit:T,data:R,editUser:u,getList:re,listParams:Y}))))))};t.default=Object(y.b)(x.a)(Object(y.c)((function(e){return O.a.createElement("div",null,O.a.createElement(z,n()({},e,{domainId:"111",addUserPromiseCode:"111",exportUserPromiseCode:"222"})))})))}}]);