(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{252:function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return j})),n.d(t,"e",(function(){return P})),n.d(t,"d",(function(){return R}));n(258);var a=n(263),r=(n(132),n(63)),i=(n(246),n(245)),c=(n(181),n(135)),l=n(41),o=n.n(l),d=n(0),u=n.n(d),s=n(68),m=n(387),p=n(409),f={"privilege-tree":"privilege-tree--3HS51","privilege-tree-wrap":"privilege-tree-wrap--24NJQ","privilege-tree-wrap-tree":"privilege-tree-wrap-tree--23Jp1",tree:"tree--ImTrS","tree-children":"tree-children--14Mjs","tree-node":"tree-node--2A4Pj","tree-node-hidden":"tree-node-hidden--3QVqr","tree-active":"tree-active--1GFpa","tree-item":"tree-item--4F3XM","tree-item-action":"tree-item-action--2byCt","tree-item-wrap":"tree-item-wrap--whQ2E"},v=function(e){var t=Object(s.a)().t,n=e.defaultExpandedKeys,a=void 0===n?[]:n,l=e.data,v=void 0===l?[]:l,E=e.defaultCurrent,g=void 0===E?"":E,y=e.onSelect,b=e.onDelete,h=e.onEdit,O=e.classNameTree,k=e.addClick,j=e.onAddChildrenTree,N=Object(d.useState)(a),w=o()(N,2),C=w[0],F=w[1],S=Object(d.useState)(g),I=o()(S,2),P=I[0],D=I[1];Object(d.useMemo)((function(){D(g)}),[g]);var R=function(e){return C.some((function(t){return t===e}))},J=function(e){R(e)?F(C.filter((function(t){return t!==e}))):F(C.concat(e))},K=function(e){y&&("function"==typeof y&&y(e),D(e.id))},V=function(e){b&&("function"==typeof b?b(e):console.error("onDelete 是函数方法"))},T=function(e){h&&("function"==typeof h?h(e):console.error("onEdit 是函数方法"))},x=function(e){j(e.id)};return u.a.createElement("div",{className:"".concat(f["privilege-tree-wrap"]," ").concat(O)},u.a.createElement(i.a,{placeholder:t("privilege-search")+t("privilege-orga-name")}),u.a.createElement("div",{className:f["privilege-tree"]},u.a.createElement("div",{className:f.tree},function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.map((function(n,a){return n.children&&n.children.length?u.a.createElement("li",{key:n.id},u.a.createElement("div",{className:f["tree-children"]},R(n.id)?u.a.createElement(m.a,{onClick:function(){return J(n.id)}}):u.a.createElement(p.a,{onClick:function(){return J(n.id)}}),u.a.createElement("div",{className:P===n.id?f["tree-item-wrap tree-active"]:f["tree-item-wrap"]},u.a.createElement("span",{className:f["tree-node"],onClick:function(){return K(n)}},u.a.createElement(c.a,{placement:"top",title:n.name},n.name)),u.a.createElement("div",{className:f["tree-item-action"]},u.a.createElement("span",{onClick:function(){return x(n)}},t("privilege-add-node")),u.a.createElement("span",{onClick:function(){return T(n)},style:{display:n.default?"none":"inline-block"}},t("privilege-common.edit")),u.a.createElement("span",{onClick:function(){return V(n)},style:{display:n.children&&n.children.length?"none":"inline-block"}},t("privilege-common.delete"))))),u.a.createElement("ul",{className:R(n.id)?null:f["tree-node-hidden"]},e(n.children))):u.a.createElement("li",{key:n.id},u.a.createElement("div",{className:f["tree-item"]},u.a.createElement("div",{className:P===n.id?"".concat(f["tree-item-wrap"]," ").concat(f["tree-active"]):f["tree-item-wrap"]},u.a.createElement("span",{className:f["tree-node"],onClick:function(){return K(n)}},u.a.createElement(c.a,{placement:"top",title:n.name},n.name)),u.a.createElement("div",{className:f["tree-item-action"]},u.a.createElement("span",{onClick:function(){return T(n)},style:{display:n.default?"none":"inline-block"}},t("privilege-common.edit")),u.a.createElement("span",{onClick:function(){return V(n)},style:{display:n.default?"none":"inline-block"}},t("privilege-common.delete"))))))}))}(v))),u.a.createElement(r.a,{type:"primary",onClick:function(){k(!0)}},"+",t("privilege-add-feature")))},E=(n(250),n(249)),g=n(176),y=n.n(g),b=(n(312),n(303)),h=(n(253),n(251)),O=n(88),k={labelCol:{span:6},wrapperCol:{span:18}},j=function(e){var t=e.visible,n=e.cancelAdd,a=e.editData,r=void 0===a?{}:a,c=e.parentId,l=void 0===c?"":c,m=e.urlType,p=void 0===m?"system":m,f=h.a.useForm(),v=o()(f,1)[0],g=Object(s.a)().t,j=Object(d.useState)([]),N=o()(j,2),w=N[0],C=N[1];Object(d.useEffect)((function(){t&&S()}),[t]),Object(d.useEffect)((function(){"{}"!==JSON.stringify(r)&&(v.setFieldsValue({code:r.code}),v.setFieldsValue({name:r.name}),v.setFieldsValue({parent:r.parentFunction?r.parentFunction.id:r.parentFunction})),l&&v.setFieldsValue({parent:l})}),[r,l]);var F,S=function(){var e="system"===p?"function/findFunctionListByParentId":"prjFunction/findPrjFunctionListByParentId";O.a.post(e).then((function(e){e.code||C(e.data)}))},I=function(){v.resetFields(),n()};return u.a.createElement(E.a,{title:"{}"!==JSON.stringify(r)?g("privilege-edit-feature"):g("privilege-add-feature"),visible:t,onOk:function(){v.submit()},onCancel:I,closable:!1,forceRender:!0,destroyOnClose:!0},u.a.createElement(h.a,y()({},k,{form:v,onFinish:function(e){var t="system"===p?"function/createFunction":"prjFunction/createPrjFunction",n="system"===p?"function/updateFunction":"prjFunction/updatePrjFunction";if("{}"===JSON.stringify(r)){var a={name:e.name,code:e.code,parentFunction:{id:e.parent}};O.a.post(t,a).then((function(e){e.code||I()}))}else{var i={id:r.id,name:e.name,code:e.code,parentFunction:{id:e.parent}};O.a.post(n,i).then((function(e){e.code||I()}))}},preserve:!1}),u.a.createElement(h.a.Item,{label:g("privilege-feature-name"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},u.a.createElement(i.a,null)),u.a.createElement(h.a.Item,{label:g("privilege-feature-code"),name:"code",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},u.a.createElement(i.a,null)),u.a.createElement(h.a.Item,{label:g("privilege-point-node"),name:"parent"},u.a.createElement(b.a,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(F=[],function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var i={};if(t.id===r.id){if(i={title:t.name,value:t.id,disabled:!0},n.push(i),t.children&&t.children.length>0)return e(t.children,i.children=[],i.disabled)}else i={title:t.name,value:t.id,disabled:a},n.push(i);if(t.children&&t.children.length>0)return e(t.children,i.children=[],a)}))}(w,F),F),placeholder:g("privilege-point-node-placeholder"),disabled:l,treeDefaultExpandedKeys:[w.length>0&&w[0].id]}))))},N=n(10),w=n.n(N);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={labelCol:{span:6},wrapperCol:{span:18}},I=function(e){var t=Object(s.a)().t,n=e.visible,a=e.cancel,r=e.editData,c=void 0===r?{}:r,l=e.group,m=void 0===l?"system":l,p=e.urlType,f=void 0===p?"system":p;if(!["system","project"].includes(f))throw Error("use RoleAdd Component must have urlType props, value:'system'、 'project'");var v=h.a.useForm(),g=o()(v,1)[0];Object(d.useEffect)((function(){g.setFieldsValue({desc:c.desc}),g.setFieldsValue({name:c.name})}),[c]);var b=function(){g.resetFields(),a()};return u.a.createElement(E.a,{title:"{}"!==JSON.stringify(c)?t("privilege-role.editRole"):t("privilege-role.addRole"),visible:n,onOk:function(){g.submit()},onCancel:b,closable:!1,forceRender:!0,destroyOnClose:!0},u.a.createElement(h.a,y()({},S,{form:g,preserve:!1,onFinish:function(e){var t="system"===f?"role/createRole":"prjRole/createPrjRole",n=F(F({},e),{},{group:m});"{}"!==JSON.stringify(c)&&(t="system"===f?"role/updateRole":"prjRole/updatePrjRole",n=F(F({},e),{},{group:m,id:c.id})),O.a.post(t,n).then((function(e){e.code||b()}))}}),u.a.createElement(h.a.Item,{label:t("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},u.a.createElement(i.a,null)),u.a.createElement(h.a.Item,{label:t("privilege-desc"),name:"desc"},u.a.createElement(i.a,null))))},P=Object(d.memo)(I),D=n(4),R=function(e){var t=e.defaultExpandedKeys,n=void 0===t?[]:t,a=e.data,r=void 0===a?[]:a,i=e.defaultCurrent,l=void 0===i?"":i,f=e.onSelect,v=e.onDelete,E=e.onEdit,g=Object(d.useState)(n),y=o()(g,2),b=y[0],h=y[1],O=Object(d.useState)(l),k=o()(O,2),j=k[0],N=k[1],w=Object(s.a)().t,C=function(e){return b.some((function(t){return t===e}))},F=function(e){C(e)?h(b.filter((function(t){return t!==e}))):h(b.concat(e))},S=function(e){N(e.id),f&&("function"==typeof f?f(e):console.error("onSelect 是函数方法"))},I=function(e){v&&("function"==typeof v?v(Object(D.p)(e)):console.error("onDelete 是函数方法"))},P=function(e){E&&("function"==typeof E?E(e):console.error("onEdit 是函数方法"))};return u.a.createElement("div",{className:"tree"},function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t,n){return t.children&&t.children.length?u.a.createElement("li",{key:t.orgaId},u.a.createElement("div",{className:"tree-children"},C(t.orgaId)?u.a.createElement(m.a,{onClick:function(){return F(t.orgaId)}}):u.a.createElement(p.a,{onClick:function(){return F(t.orgaId)}}),u.a.createElement("div",{className:"tree-item"},u.a.createElement("div",{className:"tree-item-wrap"},u.a.createElement("span",{className:j===t.orgaId?"tree-node tree-active":"tree-node",onClick:function(){return S(t)}},u.a.createElement(c.a,{placement:"top",title:t.orgaName},t.orgaName)),u.a.createElement("div",{className:"tree-item-action"},u.a.createElement("span",{onClick:function(){return P(t)},style:{display:t.default?"none":"inline-block"}},w("orga-common.edit")),u.a.createElement("span",{onClick:function(){return I(t)},style:{display:t.children&&t.children.length?"none":"inline-block"}},w("orga-common.delete")))))),u.a.createElement("ul",{className:C(t.orgaId)?null:"tree-node-hidden"},e(t.children))):u.a.createElement("li",{key:t.orgaId},u.a.createElement("div",{className:"tree-item"},u.a.createElement("div",{className:"tree-item-wrap"},u.a.createElement("span",{className:j===t.orgaId?"tree-node tree-active":"tree-node",onClick:function(){return S(t)}},u.a.createElement(c.a,{placement:"top",title:t.orgaName},t.orgaName)),u.a.createElement("div",{className:"tree-item-action"},u.a.createElement("span",{onClick:function(){return P(t)},style:{display:t.default?"none":"inline-block"}},w("orga-common.edit")),u.a.createElement("span",{onClick:function(){return I(t)},style:{display:t.default?"none":"inline-block"}},w("orga-common.delete"))))))}))}(r))}},258:function(e,t,n){"use strict";var a=n(41),r=n.n(a),i=(n(178),n(108)),c=n(0),l=n.n(c),o=n(133),d="privilege-header-menu--1jenh",u="menu-wrap--2wbjO",s=i.a.SubMenu;t.a=Object(o.c)((function(e){var t=e.className,n=e.onSelectMenu,a=Object(c.useState)(e.defaultSelectedKeys||[]),o=r()(a,2),m=o[0],p=o[1];return l.a.createElement("div",{className:"".concat(d," ").concat(t)},l.a.createElement(i.a,{theme:"light",mode:"inline",className:u,defaultSelectedKeys:e.defaultSelectedKeys,defaultOpenKeys:e.defaultOpenKeys,selectedKeys:m,onSelect:function(e){p([e.key]),n(e)}},function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t,n){return t.children&&t.children.length?l.a.createElement(s,{key:"".concat(t.id),title:t.title,icon:t.icon},e(t.children)):l.a.createElement(c.Fragment,{key:"".concat(t.id)},t.divider&&l.a.createElement(i.a.Divider,null),l.a.createElement(i.a.Item,{icon:t.icon,key:"".concat(t.id)},t.title))}))}(e.data)))}))},263:function(e,t,n){"use strict";n(310);var a=n(307),r=n(0),i=n.n(r),c=n(144),l="privilege-breadcrumb--2Po42";t.a=function(e){var t=e.routes;return i.a.createElement("div",{className:l},i.a.createElement(a.a,{itemRender:function(e,t,n){var a=n.indexOf(e)===n.length-1;return e.disabled?i.a.createElement("span",null,e.breadcrumbName):a?e.click?i.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.click()}},e.breadcrumbName):i.a.createElement("span",null,e.breadcrumbName):e.click?i.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.click()}},e.breadcrumbName):i.a.createElement(c.b,{to:e.path},e.breadcrumbName)},routes:t,separator:">"}))}}}]);