(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{395:function(e,t,r){"use strict";var n=r(0),a=r.n(n);t.a=function(e){var t=e.type,r=e.repositoryId,n=function(t){"compile"===t&&e.history.push("/index/repository/".concat(r,"/compile")),"agency"===t&&e.history.push("/index/repository/".concat(r,"/agency")),"copy"===t&&e.history.push("/index/repository/".concat(r,"/copy"))};return a.a.createElement("div",{className:"flex space-x-8 deploy"},a.a.createElement("div",{className:"".concat("compile"===t&&" choose_deploy_type ","  deploy_tab"),onClick:function(){return n("compile")}},"详情"),a.a.createElement("div",{className:"".concat("agency"===t&&" choose_deploy_type ","  deploy_tab"),onClick:function(){return n("agency")}},"代理信息"),a.a.createElement("div",{className:"".concat("copy"===t&&" choose_deploy_type ","  deploy_tab"),onClick:function(){return n("copy")}},"复制信息"))}},495:function(e,t,r){"use strict";r.r(t);r(367);var n=r(366),a=r(370),c=r.n(a),o=(r(96),r(36)),s=r(57),u=r.n(s),i=(r(157),r(109)),p=r(37),l=r.n(p),f=(r(231),r(159)),d=r(23),m=r.n(d),y=r(0),v=r.n(y),h=r(395),w=r(58),b=r.n(w),C=r(59),k=r.n(C),x=r(7),E=new(function(){function e(){b()(this,e)}var t,r,n,a;return k()(e,[{key:"createRepositoryClusterCfg",value:(a=u()(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/repositoryClusterCfg/createRepositoryClusterCfg",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"updateRepositoryClusterCfg",value:(n=u()(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/repositoryClusterCfg/updateRepositoryClusterCfg",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"deleteRepositoryClusterCfg",value:(r=u()(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/repositoryClusterCfg/deleteRepositoryClusterCfg",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"findRepositoryClusterCfgList",value:(t=u()(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/repositoryClusterCfg/findRepositoryClusterCfgList",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}()),g=(r(228),r(155)),O=r(33),j=r.n(O),I=(r(229),r(110));function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){j()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _={labelCol:{span:6},wrapperCol:{span:25}},P=function(e){var t=I.a.useForm(),r=l()(t,1)[0],n=e.compileType,a=e.visible,s=e.onCancel,i=e.repositoryId,p=e.copy;Object(y.useEffect)((function(){p&&r.setFieldsValue({url:p.url,source:p.source,account:p.account,password:p.password,timeOut:p.timeOut})}),[p]);var d=function(){var e=u()(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.validateFields().then(function(){var e=u()(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=7;break}return e.next=3,E.updateRepositoryClusterCfg(R(R({},t),{},{id:p.id,repository:{id:i},user:{id:Object(x.e)().userId}}));case 3:e.sent.code||s(),e.next=11;break;case 7:return e.next=9,E.createRepositoryClusterCfg(R(R({},t),{},{repository:{id:i},user:{id:Object(x.e)().userId}}));case 9:e.sent.code||s();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return v.a.createElement(f.a,{visible:a,title:"add"===n?"添加复制源":"修改复制源",onCancel:s,okText:"保存",cancelText:"取消",width:500,destroyOnClose:!0,closable:!1,onOk:d,footer:[v.a.createElement(o.a,{key:"back",onClick:s},"取消"),v.a.createElement(o.a,{key:"submit",type:"primary",onClick:function(){}},"连接"),v.a.createElement(o.a,{type:"primary",onClick:d},"保存")]},v.a.createElement(I.a,c()({},_,{form:r,preserve:!1,layout:"vertical"}),v.a.createElement(I.a.Item,{name:"url",label:"地址",rules:[{required:!0,message:"地址必填"}]},v.a.createElement(g.a,{placeholder:"请输入来源地址"})),v.a.createElement(I.a.Item,{name:"source",label:"名称",rules:[{required:!0,message:"名称必填"}]},v.a.createElement(g.a,{placeholder:"请输入来源名称"})),v.a.createElement(I.a.Item,{name:"account",label:"账号",rules:[{required:!0,message:"账号必填"}]},v.a.createElement(g.a,{placeholder:"请输入账号"})),v.a.createElement(I.a.Item,{name:"password",label:"密码",rules:[{required:!0,message:"密码必填"}]},v.a.createElement(g.a,{placeholder:"请输入密码",type:"password"})),v.a.createElement(I.a.Item,{name:"timeOut",label:"超时"},v.a.createElement(g.a,{placeholder:"请输入超时",type:"timeOut"}))))},S=r(107),T=f.a.confirm;t.default=function(e){var t=e.match.params,r=Object(y.useState)([]),a=l()(r,2),s=a[0],p=a[1],f=Object(y.useState)(null),d=l()(f,2),w=d[0],b=d[1],C=Object(y.useState)(!1),k=l()(C,2),x=k[0],g=k[1],O=Object(y.useState)(null),j=l()(O,2),I=j[0],N=j[1],R=[{title:"来源",dataIndex:"source",width:"20%",render:function(e,t){return v.a.createElement("div",{className:""}," ",e)}},{title:"地址",dataIndex:"url",width:"50%"},{title:"操作",key:"activity",width:"10%",render:function(e,t){return v.a.createElement(i.b,{size:"useState",className:"space-x-4 text-blue-500 cursor-pointer"},v.a.createElement("div",{onClick:function(){return J(t)}},"配置"),v.a.createElement("div",{onClick:function(){return D(t)}},"删除"))}}];Object(y.useEffect)(u()(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:case"end":return e.stop()}}),e)}))),[]);var _=function(){var e=u()(m.a.mark((function e(){var r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={repositoryId:t.id},e.next=3,E.findRepositoryClusterCfgList(r);case 3:0===(n=e.sent).code&&p(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=u()(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T({title:"是否确认删除该复制配置",icon:v.a.createElement(S.a,null),content:"",okText:"确认",okType:"danger",cancelText:"取消",onOk:function(){q(t.id)},onCancel:function(){}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=u()(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,E.deleteRepositoryClusterCfg(r);case 4:if(0!==e.sent.code){e.next=8;break}return e.next=8,_();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=u()(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:g(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=u()(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(!0),N("add");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=u()(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(t),N("update"),g(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v.a.createElement("div",{className:"copy"},v.a.createElement("div",{className:"copy-width"},v.a.createElement("div",{className:"flex justify-between"},v.a.createElement("div",{className:" copy-title"},"配置"),v.a.createElement("div",{className:"mt-3"},v.a.createElement(o.a,{type:"primary",htmlType:"submit",onClick:L},"+ 配置复制"))),v.a.createElement(h.a,c()({type:"copy",repositoryId:t.id},e)),v.a.createElement("div",{className:"mt-6"},v.a.createElement(n.a,{dataSource:s,columns:R,pagination:!1})),v.a.createElement(P,{visible:x,onCancel:F,repositoryId:t.id,copy:w,compileType:I})))}}}]);