(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{399:function(e,t,n){"use strict";n.d(t,"a",(function(){return se}));n(364);var r=n(365),a=(n(368),n(369)),i=(n(367),n(366)),o=(n(157),n(109)),l=(n(158),n(68)),c=(n(96),n(36)),u=(n(434),n(435)),s=n(0),f=n.n(s),d=n(60),p=n(360),m=n(506),b=n(2),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M759 335c0-137-111-248-248-248S263 198 263 335c0 82.8 40.6 156.2 103 201.2-.4.2-.7.3-.9.4-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00136 874.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C356 614.2 431 583 511 583c137 0 248-111 248-248zM511 507c-95 0-172-77-172-172s77-172 172-172 172 77 172 172-77 172-172 172zm105 221h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H703.5l47.2-60.1a8.1 8.1 0 001.7-4.9c0-4.4-3.6-8-8-8h-72.6c-4.9 0-9.5 2.3-12.6 6.1l-68.5 87.1c-4.4 5.6-6.8 12.6-6.8 19.8.1 17.7 14.4 32 32.1 32zm240 64H592c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h176.5l-47.2 60.1a8.1 8.1 0 00-1.7 4.9c0 4.4 3.6 8 8 8h72.6c4.9 0 9.5-2.3 12.6-6.1l68.5-87.1c4.4-5.6 6.8-12.6 6.8-19.8-.1-17.7-14.4-32-32.1-32z"}}]},name:"user-switch",theme:"outlined"},v=n(14),g=function(e,t){return s.createElement(v.a,Object(b.a)(Object(b.a)({},e),{},{ref:t,icon:y}))};g.displayName="UserSwitchOutlined";var h=s.forwardRef(g),O=n(503),E=n(225),j=n(7),S=(n(228),n(155)),w=(n(229),n(110)),k=(n(385),n(349));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){var t=Object(p.a)().t,n=e.visible,r=e.cancel,a=e.editData,i=void 0===a?{}:a,o=e.group,l=void 0===o?"system":o,c=e.urlType,u=void 0===c?"system":c,d=e.bgroup;if(!["system","project"].includes(u))throw Error("use RoleAdd Component must have urlType props, value:'system'、 'project'");var m=C(w.a.useForm(),1)[0];Object(s.useEffect)((function(){m.setFieldsValue({desc:i.desc}),m.setFieldsValue({name:i.name})}),[i]);var b=function(){m.resetFields(),r()};return f.a.createElement(k.a,{title:"{}"!==JSON.stringify(i)?t("privilege-role.editRole"):t("privilege-role.addRole"),visible:n,onOk:function(){m.submit()},onCancel:b,forceRender:!0,destroyOnClose:!0,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},f.a.createElement(w.a,{form:m,preserve:!1,onFinish:function(e){var t="role/createRole",n=P(P({},e),{},{group:l,type:"system"===u?"1":"2",bgroup:d});"{}"!==JSON.stringify(i)&&(t="role/updateRole",n=P(P({},e),{},{group:l,id:i.id,type:"system"===u?"1":"2"})),j.a.post(t,n).then((function(e){e.code||b()}))},layout:"vertical"},f.a.createElement(w.a.Item,{label:t("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},f.a.createElement(S.a,{placeholder:t("privilege-role.roleName")})),f.a.createElement(w.a.Item,{label:t("privilege-desc"),name:"desc"},f.a.createElement(S.a,{placeholder:t("privilege-desc")}))))},x=Object(s.memo)(D),R=(n(232),n(97)),F=(n(230),n(142)),T=n(211);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=function(e){var t=Object(p.a)().t,n=e.visible,l=e.onCancel,c=e.id,u=void 0===c?"":c,d=e.addSelectedRowKeys,m=e.userIDWidthId,b=e.userDir,y=e.bgroup,v=_(Object(s.useState)([]),2),g=v[0],h=v[1],O=_(Object(s.useState)([]),2),E=O[0],w=O[1],I=_(Object(s.useState)(10),1)[0],P=_(Object(s.useState)(1),2),A=P[0],C=P[1],z=_(Object(s.useState)(0),2),D=z[0],x=z[1],R=_(Object(s.useState)({pageParam:{pageSize:I,currentPage:A}}),2),T=R[0],U=R[1];Object(s.useEffect)((function(){L(T)}),[T]),Object(s.useEffect)((function(){h(d)}),[d]);var L=function(e){j.a.post("/user/user/findUserPage",e).then((function(e){e.code||(x(e.data.totalRecord),w(e.data.dataList))}))},K=function(){U({pageParam:{pageSize:I,currentPage:1}}),h([]),C(1),x(0),l()},M=[{title:t("privilege-role.name"),dataIndex:"name",key:"name",width:"20%",ellipsis:!0,render:function(e,t){return f.a.createElement(o.b,null,f.a.createElement(F.a,{userInfo:t})," ",e)}},{title:t("privilege-role.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0},{title:t("privilege-role.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0},{title:t("privilege-role.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0},{title:t("privilege-role.type"),dataIndex:"userType",key:"userType",width:"10%",ellipsis:!0,render:function(e){var t=b.findIndex((function(t){return t.id==e}));return t>-1?b[t].name:"--"}}],B={selectedRowKeys:g,onChange:function(e){h(e)},onSelect:function(e){var t,n="roleUser/deleteRoleUser";g.some((function(t){return t===e.id}))?(t=new FormData).append("id",m[e.id]):(t={role:{id:u},user:{id:e.id},bgroup:y},n="roleUser/createRoleUser"),j.a.post(n,t)}};return f.a.createElement(k.a,{title:t("privilege-select-user"),visible:n,onOk:function(){K()},onCancel:K,width:1200,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},f.a.createElement(r.a,{style:{paddingBottom:16}},f.a.createElement(a.a,{span:24},f.a.createElement(S.a,{placeholder:t("privilege-user"),width:240,onPressEnter:function(e){var t=e.target.value,n=N(N({},T),{},{name:t,pageParam:{pageSize:I,currentPage:1}});U(n)},style:{width:240}}))),f.a.createElement(r.a,null,f.a.createElement(a.a,{span:24},f.a.createElement("div",{style:{width:"100%"}},f.a.createElement(i.a,{columns:M,dataSource:E,rowSelection:B,rowKey:function(e){return e.id},pagination:{current:A,pageSize:I,total:D,onChange:function(e){C(e);var t=N(N({},T),{},{pageParam:{pageSize:I,currentPage:e}});U(t)}}})))))};function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=e.roleDetail,n=e.bgroup,u=Object(p.a)().t,d=$(Object(s.useState)([]),2),m=d[0],b=d[1];Object(s.useEffect)((function(){return y(),function(){return b([])}}),[]);var y=function(){j.a.post("/user/userdir/findAllList").then((function(e){e.code||b(e.data)}))},v=[{title:u("privilege-role.nickname"),dataIndex:["user","nickname"],render:function(e,t){return f.a.createElement(o.b,null,f.a.createElement(F.a,{userInfo:t.user})," ",e)}},{title:u("privilege-role.phone"),dataIndex:["user","phone"]},{title:u("privilege-role.email"),dataIndex:["user","email"]},{title:u("privilege-role.type"),dataIndex:["user","userType"],render:function(e){var t=m.findIndex((function(t){return t.id==e}));return t>-1?m[t].name:"--"}},{title:u("privilege-common.action"),key:"action",render:function(e,t){return f.a.createElement(o.b,{size:"middle"},f.a.createElement(l.a,{title:"删除"},f.a.createElement(O.a,{onClick:function(){return N(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}],g=$(Object(s.useState)([]),2),h=g[0],w=g[1],k=$(Object(s.useState)(!1),2),I=k[0],P=k[1],A=$(Object(s.useState)([]),2),C=A[0],z=A[1],D=$(Object(s.useState)({}),2),x=D[0],R=D[1];Object(s.useEffect)((function(){t&&U({roleId:t.id})}),[t]);var U=function(e){j.a.post("roleUser/findRoleUserList",e).then((function(e){if(!e.code){w(e.data);var t=e.data.map((function(e){return e.user.id})),n=e.data.reduce((function(e,t){return e[t.user.id]=t.id,e}),{});z(t),R(n)}}))},N=function(e){var n=new FormData;n.append("id",e),j.a.post("roleUser/deleteRoleUser",n).then((function(e){e.code||U({roleId:t.id})}))};return f.a.createElement("div",{className:"tiklab_promisse"},f.a.createElement(r.a,{justify:"space-between"},f.a.createElement(S.a,{placeholder:"搜索昵称、手机号、邮箱",onPressEnter:function(e){var n=e.target.value;U({roleId:t.id,name:n})},prefix:f.a.createElement(T.a,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),style:{width:240}}),f.a.createElement(c.a,{onClick:function(){P(!0)},type:"primary",icon:f.a.createElement(E.a,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},u("privilege-add-user"))),f.a.createElement(r.a,null,f.a.createElement(a.a,{span:24},f.a.createElement(i.a,{columns:v,dataSource:h,rowKey:function(e){return e.id}}))),f.a.createElement(M,B({},e,{visible:I,onCancel:function(){return P(!1),void U({roleId:t.id,bgroup:n})},id:t.id,addSelectedRowKeys:C,userIDWidthId:x,userDir:m,bgroup:n})))},V=(n(400),n(393));function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ee=V.a.Group,te=function(e){var t=e.roleDetail,n=e.group,r=e.bgroup,a=X(Object(s.useState)([]),2),o=a[0],l=a[1],c=X(Object(s.useState)({}),2),u=c[0],d=c[1],p=X(Object(s.useState)({}),2),m=p[0],b=p[1],y=[{title:"模块",key:"label",render:function(e){return f.a.createElement(V.a,{indeterminate:e.indeterminate,onChange:function(t){return k(e.value)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return f.a.createElement(ee,{options:u[e.value],value:e.checkedList,onChange:function(t){return E(e.value,t)}})}}];Object(s.useEffect)((function(){t&&v()}),[t]);var v=function(){j.a.post("/function/findFunctionList",{group:n,bgroup:r}).then((function(e){if(!e.code){var n=g(e.data);l(n.result),d(n.resultChild),O(t.id,!0,n.result,n.resultChild)}}))},g=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),n=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),r=[],a={};return t.forEach((function(e){var t=e.value,i=n.filter((function(e){return e.parent===t}));r.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=i})),{result:r,resultChild:a}},h=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),n=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),r={};return n.forEach((function(e){var n=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);r[e]=[].concat(Q(n),[e])})),r},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={roleId:e,bgroup:r};j.a.post("roleFunction/findRoleFunctionList",i).then((function(e){if(!e.code){var r=h(e.data),i=e.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),c=t?a:u,s=(t?n:o).map((function(e){var t=r[e.value]?r[e.value]:[],n=0===c[e.value].length,a=t.length===c[e.value].length+1&&0!==t.length,i=a?!a:!!t.length&&t.length<c[e.value].length+1;return n&&1===t.length&&(a=!0,i=!1),q(q({},e),{},{checkedList:t,indeterminate:i,checkAll:a})}));b(i),l(s)}}))},E=function(e,t){S(e,t)},S=function(e,t){var n=t,r=o.filter((function(t){return t.value===e}))[0].checkedList,a=n.length<r.length,i=a?w(r,n):w(n,r);if(a)if(r.length>2){var l=i.filter((function(t){return t!==e}));l.map((function(e,t){P(e,t+1===l.length)}))}else{var c=Array.from(new Set(0===n.length?[e].concat(Q(i)):i));c.map((function(e,t){P(e,t+1===c.length)}))}else{var u=0===r.length?[e].concat(Q(i)):i;u.map((function(e,t){I(e,t+1===u.length)}))}},w=function(e,t){for(var n=[],r=function(r){var a=e[r];t.some((function(e){return e===a}))&&0!==t.length||n.push(a)},a=0;a<e.length;a++)r(a);return n},k=function(e,t){var n=Object.keys(m),r=n.includes(e),a=n.filter((function(t){return u[e].some((function(e){return e.value===t}))})),i=u[e].filter((function(e){if(!a.some((function(t){return t===e.value})))return e})),o=(!r||0!==u[e].length)&&u[e].length===i.length;if(r||(o=!0,i=u[e]),o)n.includes(e)||(i=[].concat(Q(i),[{value:e}])),i.length>0?i.map((function(e,t){I(e.value,t+1===i.length)})):I(e,!0);else{if(n.includes(e)){var l=a.map((function(e){return{value:e}}));i=[].concat(Q(l),[{value:e}])}i.length>0?i.map((function(e,t){P(e.value,t+1===i.length)})):P(e,!0)}},I=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={role:{id:t.id},function:{id:e},bgroup:r};j.a.post("roleFunction/createRoleFunction",a).then((function(e){n&&O(t.id)}))},P=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=m[e],a=new FormData;a.append("id",r),j.a.post("roleFunction/deleteRoleFunction",a).then((function(e){n&&O(t.id)}))};return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"tiklab_promisse"},f.a.createElement(i.a,{pagination:!1,columns:y,dataSource:o,rowKey:function(e){return e.value},bordered:!0})))},ne=n(408);function re(){return(re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ae=R.a.TabPane,ie=function(e){var t=e.roleDetailParams,n=e.bgroup,i=e.close,o=Object(p.a)().t,l=[{click:i,breadcrumbName:"角色 "},{breadcrumbName:t.name||"角色详情"}];return f.a.createElement("div",{className:"tiklab_system_role_detail"},f.a.createElement(r.a,null,f.a.createElement(a.a,{span:24},f.a.createElement(ne.a,{routes:l}))),f.a.createElement(R.a,{defaultActiveKey:"people"},f.a.createElement(ae,{tab:o("privilege-role.people"),key:"people"},f.a.createElement(H,re({},e,{group:t.group,roleDetail:t,bgroup:n}))),f.a.createElement(ae,{tab:o("privilege-role.promise"),key:"promise"},f.a.createElement(te,re({},e,{group:t.group,roleDetail:t,bgroup:n})))))},oe=n(376),le=(n(231),n(79));function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var se=Object(d.b)(le.a)(Object(d.c)((function(e){var t=e.systemRoleStore,n=e.bgroup,d=void 0===n?"eas":n,b=e.isBase,y=void 0!==b&&b,v=Object(p.a)().t,g=t.getRoles,S=t.privilegeSystemRole,w=ce(Object(s.useState)(!1),2),k=w[0],I=w[1],P=ce(Object(s.useState)({}),2),A=P[0],C=P[1],z=ce(Object(s.useState)(""),2),D=z[0],R=z[1],F=ce(Object(s.useState)(null),2),T=F[0],U=F[1],N={bgroup:d},L=ce(Object(s.useState)(N),2),_=L[0];L[1];var K=[{title:"角色名称",dataIndex:"name",render:function(e,t){switch(t.tag){case 1:return f.a.createElement(c.a,{type:"link",onClick:function(){return W(t)}},e,"  ",f.a.createElement(u.a,{color:"#2db7f5"},"管理员"));case 2:return f.a.createElement(c.a,{type:"link",onClick:function(){return W(t)}},e,"  ",f.a.createElement(u.a,{color:"#87d068"},"默认"));default:return f.a.createElement(c.a,{type:"link",onClick:function(){return W(t)}},e)}}},{title:"类型",dataIndex:"group",render:function(e){return q(e)}},{title:"成员数",dataIndex:"user"},{title:"操作",dataIndex:"action",render:function(e,t){return y?f.a.createElement(o.b,null,f.a.createElement(l.a,{title:"编辑"},f.a.createElement(m.a,{onClick:function(){return B(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),![1,2].includes(t.tag)&&f.a.createElement(l.a,{title:"设置默认"},f.a.createElement(h,{onClick:function(){return $(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),f.a.createElement(l.a,{title:"删除"},f.a.createElement(O.a,{onClick:function(){return M(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))):f.a.createElement(o.b,null,"system"!==t.group&&f.a.createElement(l.a,{title:"编辑"},f.a.createElement(m.a,{onClick:function(){return B(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),![1,2].includes(t.tag)&&f.a.createElement(l.a,{title:"设置默认"},f.a.createElement(h,{onClick:function(){return $(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),"system"!==t.group&&f.a.createElement(l.a,{title:"删除"},f.a.createElement(O.a,{onClick:function(){return M(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}];Object(s.useEffect)((function(){J(_)}),[_]);var M=function(e){var t=new FormData;t.append("id",e),j.a.post("/role/deleteRole",t).then((function(e){e.code||J(_)}))},B=function(e){C(e),I(!0)},$=function(e){j.a.post("/role/setdefaultRole",e).then((function(e){e.code||g(_)}))},J=function(e){j.a.post("/role/findRoleList",e).then((function(e){e.code||g(e.data)}))},H=Object(s.useCallback)((function(){C({}),I(!1),J(_)}),[k]),V=function(e){R(e),I(!0)},W=function(e){U(e)},q=function(e){switch(e){case"system":return"内置";case"custom":default:return v("privilege-role.custom")}};return f.a.createElement("div",{className:"tiklab_system_role"},T?f.a.createElement(ie,{bgroup:d,roleDetailParams:T,close:function(){U(null)}}):f.a.createElement("div",{className:"tiklab_system_role_table"},f.a.createElement(oe.a,{title:"角色",style:{paddingLeft:8}},f.a.createElement(o.b,null,y?f.a.createElement(c.a,{onClick:function(){return V("system")},icon:f.a.createElement(E.a,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},v("privilege-role.addSystemRole")):f.a.createElement(c.a,{onClick:function(){return V("custom")},type:"primary",icon:f.a.createElement(E.a,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},v("privilege-role.addRole")))),f.a.createElement(r.a,null,f.a.createElement(a.a,{span:24},f.a.createElement(i.a,{columns:K,dataSource:S,rowKey:function(e){return e.id},pagination:!1})))),f.a.createElement(x,{visible:k,cancel:H,editData:A,group:D,urlType:"system",bgroup:d}))})))},469:function(e,t,n){}}]);