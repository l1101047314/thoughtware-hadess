(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{398:function(e,t,r){"use strict";r.d(t,"a",(function(){return se}));r(364);var n=r(365),a=(r(368),r(369)),o=(r(367),r(366)),i=(r(96),r(36)),l=(r(157),r(109)),c=(r(158),r(68)),u=r(0),f=r.n(u),s=r(60),d=r(360),p=r(7),m=r(503),b=r(225),v=(r(228),r(155)),g=(r(229),r(110)),y=(r(372),r(371)),h=(r(385),r(349));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}y.a.Option;var I=function(e){var t=e.visible,r=e.handleCancel,n=e.domainId,a=e.bgroup,o=Object(d.a)().t,i=E(g.a.useForm(),1)[0];return f.a.createElement(h.a,{title:"新增项目域角色",visible:t,onOk:function(){i.submit()},onCancel:r,destroyOnClose:!0,cancelText:o("privilege-common.cancel"),okText:o("privilege-common.save")},f.a.createElement(g.a,{form:i,preserve:!1,onFinish:function(e){var t={domainId:n,bgroup:a,role:j(j({},e),{},{type:"2",group:"custom",bgroup:a,scope:2})};p.a.post("dmRole/createDmRole",t).then((function(e){0===e.code&&r()}))},layout:"vertical"},f.a.createElement(g.a.Item,{label:o("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},f.a.createElement(v.a,{placeholder:o("privilege-role.roleName")})),f.a.createElement(g.a.Item,{label:o("privilege-desc"),name:"desc"},f.a.createElement(v.a,{placeholder:o("privilege-desc")}))))},P=(r(232),r(97)),k=(r(230),r(142)),A=r(211),D=r(2),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},x=r(14),R=function(e,t){return u.createElement(x.a,Object(D.a)(Object(D.a)({},e),{},{ref:t,icon:C}))};R.displayName="UserAddOutlined";var F=u.forwardRef(R);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){var t=Object(d.a)().t,r=e.visible,i=e.onCancel,c=e.id,s=void 0===c?"":c,m=e.addSelectedRowKeys,b=e.userIDWidthId,g=e.domainId,y=e.bgroup,O=L(Object(u.useState)([]),2),j=O[0],w=O[1],E=L(Object(u.useState)([]),2),S=E[0],I=E[1],P=L(Object(u.useState)(10),1)[0],A=L(Object(u.useState)(1),2),D=A[0],C=A[1],x=L(Object(u.useState)(0),2),R=x[0],F=x[1],U={domainId:g,pageParam:{pageSize:P,currentPage:D}},z=L(Object(u.useState)(U),2),N=z[0],_=z[1];Object(u.useEffect)((function(){K(N)}),[N]),Object(u.useEffect)((function(){w(m)}),[m]);var K=function(e){p.a.post("/user/dmUser/findDmUserPage",e).then((function(e){e.code||(F(e.data.totalRecord),I(e.data.dataList.map((function(e){return e.user}))))}))},M=function(){_(T(T({},U),{},{pageParam:{pageSize:P,currentPage:1}})),w([]),C(1),F(0),i()},B=[{title:t("privilege-role.name"),dataIndex:"name",key:"name",width:"20%",ellipsis:!0,render:function(e,t){return f.a.createElement(l.b,null,f.a.createElement(k.a,{userInfo:t})," ",e)}},{title:t("privilege-role.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0},{title:t("privilege-role.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0},{title:t("privilege-role.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0},{title:t("privilege-role.type"),dataIndex:"userType",key:"userType",width:"10%",ellipsis:!0,render:function(e){switch(e){case 2:return t("privilege-role.thirdparty");case 1:return t("privilege-role.internal");default:return"--"}}}],$={selectedRowKeys:j,onChange:function(e){w(e)},onSelect:function(e){var t,r="/roleUser/deleteRoleUser";j.some((function(t){return t===e.id}))?(t=new FormData).append("id",b[e.id]):(t={role:{id:s},user:{id:e.id},bgroup:y},r="/roleUser/createRoleUser"),p.a.post(r,t)}};return f.a.createElement(h.a,{title:t("privilege-select-user"),visible:r,onOk:function(){M()},onCancel:M,width:1200,destroyOnClose:!0,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},f.a.createElement(n.a,{style:{paddingBottom:16}},f.a.createElement(a.a,{span:24},f.a.createElement(v.a,{placeholder:t("privilege-user"),onPressEnter:function(e){var t=e.target.value,r=T(T({},N),{},{name:t,pageParam:{pageSize:P,currentPage:1}});_(r)},style:{width:240}}))),f.a.createElement(n.a,null,f.a.createElement(a.a,{span:24},f.a.createElement("div",{style:{width:"100%"}},f.a.createElement(o.a,{columns:B,dataSource:S,rowSelection:$,rowKey:function(e){return e.id},pagination:{current:D,pageSize:P,total:R,onChange:function(e){C(e);var t=T(T({},N),{},{pageParam:{pageSize:P,currentPage:e}});_(t)}}})))))};function K(){return(K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $=function(e){var t=e.roleDetail,r=e.domainId,s=e.bgroup,b=Object(d.a)().t,g=M(Object(u.useState)([]),2),y=g[0],h=g[1];Object(u.useEffect)((function(){return O(),function(){return h([])}}),[]);var O=function(){p.a.post("/user/userdir/findAllList").then((function(e){e.code||h(e.data)}))},j=[{title:b("privilege-role.nickname"),dataIndex:["user","nickname"],render:function(e,t){return f.a.createElement(l.b,null,f.a.createElement(k.a,{userInfo:t.user})," ",e)}},{title:b("privilege-role.name"),dataIndex:["user","name"]},{title:b("privilege-role.phone"),dataIndex:["user","phone"]},{title:b("privilege-role.email"),dataIndex:["user","email"]},{title:b("privilege-role.type"),dataIndex:["user","userType"],render:function(e){var t=y.findIndex((function(t){return t.id==e}));return t>-1?y[t].name:"--"}},{title:b("privilege-common.action"),key:"action",render:function(e,t){return f.a.createElement(l.b,{size:"middle"},f.a.createElement(c.a,{title:"删除"},f.a.createElement(m.a,{onClick:function(){return N(t.id)}})))}}],w=M(Object(u.useState)([]),2),E=w[0],S=w[1],I=M(Object(u.useState)(!1),2),P=I[0],D=I[1],C=M(Object(u.useState)([]),2),x=C[0],R=C[1],U=M(Object(u.useState)({}),2),T=U[0],z=U[1];Object(u.useEffect)((function(){t&&L({roleId:t.role.id,bgroup:s})}),[t]);var L=function(e){p.a.post("roleUser/findRoleUserList",e).then((function(e){if(!e.code){S(e.data);var t=e.data.map((function(e){return e.user.id})),r=e.data.reduce((function(e,t){return e[t.user.id]=t.id,e}),{});R(t),z(r)}}))},N=function(e){var r=new FormData;r.append("id",e),p.a.post("/roleUser/deleteRoleUser",r).then((function(e){e.code||L({roleId:t.role.id})}))};return f.a.createElement("div",{className:"tiklab_promisse"},f.a.createElement(n.a,{style:{padding:"16px 0"},justify:"space-between"},f.a.createElement(v.a,{placeholder:b("privilege-search")+b("privilege-user-and-org"),onPressEnter:function(e){var r=e.target.value;L({roleId:t.role,id:id,name:r,bgroup:s})},prefix:f.a.createElement(A.a,null),style:{width:240}}),f.a.createElement(i.a,{onClick:function(){D(!0)},icon:f.a.createElement(F,null),type:"primary"},b("privilege-add-user"))),f.a.createElement(n.a,null,f.a.createElement(a.a,{span:24},f.a.createElement(o.a,{columns:j,dataSource:E,rowKey:function(e){return e.id}}))),f.a.createElement(_,K({},e,{visible:P,onCancel:function(){return D(!1),void L({roleId:t.role.id,bgroup:s})},id:t.role.id,addSelectedRowKeys:x,userIDWidthId:T,domainId:r,userDir:y,bgroup:s})))},J=(r(400),r(393));function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y=J.a.Group,Z=function(e){var t=e.roleDetail,r=e.bgroup,n=Q(Object(u.useState)([]),2),a=n[0],i=n[1],l=Q(Object(u.useState)({}),2),c=l[0],s=l[1],d=Q(Object(u.useState)({}),2),m=d[0],b=d[1],v=[{title:"模块",key:"label",render:function(e){return f.a.createElement(J.a,{indeterminate:e.indeterminate,onChange:function(t){return S(e.value)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return f.a.createElement(Y,{options:c[e.value],value:e.checkedList,onChange:function(t){return j(e.value,t)}})}}];Object(u.useEffect)((function(){t&&g()}),[t]);var g=function(){p.a.post("/function/findFunctionList",{bgroup:r,type:"2"}).then((function(e){if(!e.code){var r=y(e.data);i(r.result),s(r.resultChild),O(t.role.id,!0,r.result,r.resultChild)}}))},y=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),n=[],a={};return t.forEach((function(e){var t=e.value,o=r.filter((function(e){return e.parent===t}));n.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=o})),{result:n,resultChild:a}},h=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),r=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),n={};return r.forEach((function(e){var r=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);n[e]=[].concat(H(r),[e])})),n},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l={roleId:e,bgroup:r};p.a.post("roleFunction/findRoleFunctionList",l).then((function(e){if(!e.code){var r=h(e.data),l=e.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),u=t?o:c,f=(t?n:a).map((function(e){var t=r[e.value]?r[e.value]:[],n=0===u[e.value].length,a=t.length===u[e.value].length+1&&0!==t.length,o=a?!a:!!t.length&&t.length<u[e.value].length+1;return n&&1===t.length&&(a=!0,o=!1),q(q({},e),{},{checkedList:t,indeterminate:o,checkAll:a})}));b(l),i(f)}}))},j=function(e,t){w(e,t)},w=function(e,t){var r=t,n=a.filter((function(t){return t.value===e}))[0].checkedList,o=r.length<n.length,i=o?E(n,r):E(r,n);if(o)if(n.length>2){var l=i.filter((function(t){return t!==e}));l.map((function(e,t){P(e,t+1===l.length)}))}else{var c=Array.from(new Set(0===r.length?[e].concat(H(i)):i));c.map((function(e,t){P(e,t+1===c.length)}))}else{var u=0===n.length?[e].concat(H(i)):i;u.map((function(e,t){I(e,t+1===u.length)}))}},E=function(e,t){for(var r=[],n=function(n){var a=e[n];t.some((function(e){return e===a}))&&0!==t.length||r.push(a)},a=0;a<e.length;a++)n(a);return r},S=function(e,t){var r=Object.keys(m),n=r.includes(e),a=r.filter((function(t){return c[e].some((function(e){return e.value===t}))})),o=c[e].filter((function(e){if(!a.some((function(t){return t===e.value})))return e})),i=(!n||0!==c[e].length)&&c[e].length===o.length;if(n||(i=!0,o=c[e]),i)r.includes(e)||(o=[].concat(H(o),[{value:e}])),o.length>0?o.map((function(e,t){I(e.value,t+1===o.length)})):I(e,!0);else{if(r.includes(e)){var l=a.map((function(e){return{value:e}}));o=[].concat(H(l),[{value:e}])}o.length>0?o.map((function(e,t){P(e.value,t+1===o.length)})):P(e,!0)}},I=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={role:{id:t.role.id},function:{id:e},bgroup:r};p.a.post("roleFunction/createRoleFunction",a).then((function(e){n&&O(t.role.id)}))},P=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=m[e],a=new FormData;a.append("id",n),p.a.post("/roleFunction/deleteRoleFunction",a).then((function(e){r&&O(t.role.id)}))};return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"tiklab_promisse"},f.a.createElement(o.a,{pagination:!1,columns:v,dataSource:a,rowKey:function(e){return e.value},bordered:!0})))},ee=r(408);function te(){return(te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var re=P.a.TabPane,ne=function(e){var t=Object(d.a)().t,r=e.roleDetailParams,o=e.domainId,i=e.bgroup,l=[{click:e.close,breadcrumbName:"项目域角色"},{path:"first",breadcrumbName:"角色详情"}];return f.a.createElement("div",{className:"tiklab_domain_role_detail"},f.a.createElement(n.a,null,f.a.createElement(a.a,{span:24},f.a.createElement(ee.a,{routes:l}))),f.a.createElement(P.a,{defaultActiveKey:"people"},f.a.createElement(re,{tab:t("privilege-role.people"),key:"people"},f.a.createElement($,te({},e,{group:r.group,roleDetail:r,domainId:o,bgroup:i}))),f.a.createElement(re,{tab:t("privilege-role.promise"),key:"promise"},f.a.createElement(Z,te({},e,{group:r.group,roleDetail:r,bgroup:i})))))},ae=r(376),oe=(r(231),r(86));function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se=Object(s.b)(oe.b)(Object(s.c)((function(e){var t=Object(d.a)().t,r=e.privilegeDomainRoleStore,s=e.domainId,v=e.bgroup,g=void 0===v?"eas":v,y=r.getDomainRoles,h=r.privilegeDomainRole,O=ue(Object(u.useState)(!1),2),j=O[0],w=O[1],E=ue(Object(u.useState)([]),2);E[0],E[1];var S={bgroup:g,domainId:s,sopce:2},P=ue(Object(u.useState)(S),1)[0],k=ue(Object(u.useState)(null),2),A=k[0],D=k[1];Object(u.useEffect)((function(){x(P)}),[P]);var C=[{title:"角色名称",dataIndex:"name",render:function(e,t){return f.a.createElement("a",{onClick:function(){return R(t)}},e)}},{title:"角色类型",dataIndex:"group",render:function(e){return F(e)}},{title:"操作",dataIndex:"action",render:function(e,t){return f.a.createElement(l.b,null,"system"!==t.group&&f.a.createElement(c.a,{title:"删除"},f.a.createElement(m.a,{onClick:function(){return U(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}],x=function(e){p.a.post("/dmRole/findDmRoleList",e).then((function(e){if(!e.code){var t=(e.data||[]).map((function(e){return le(le({},e),{},{name:e.role.name,desc:e.role.desc,group:e.role.group})}));y(t)}}))},R=function(e){D(e)},F=function(e){switch(e){case"system":return"内置";case"custom":default:return t("privilege-role.custom")}},U=function(e){var t=new FormData;t.append("id",e),p.a.post("dmRole/deleteDmRole",t).then((function(e){e.code||x(P)}))};return f.a.createElement("div",{className:"tiklab_domain_role"},A?f.a.createElement(ne,{roleDetailParams:A,domainId:s,bgroup:g,close:function(){D(null)}}):f.a.createElement("div",{className:"tiklab_domain_role_table"},f.a.createElement(ae.a,{title:"项目域角色列表",style:{paddingLeft:8}},f.a.createElement(i.a,{onClick:function(){w(!0)},type:"primary",icon:f.a.createElement(b.a,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},t("privilege-role.addRole"))),f.a.createElement(n.a,null,f.a.createElement(a.a,{span:24},f.a.createElement(o.a,{columns:C,dataSource:h,rowKey:function(e){return e.id},pagination:!1})))),f.a.createElement(I,{visible:j,domainId:s,handleCancel:function(){w(!1),x(P)},bgroup:g}))})))},460:function(e,t,r){}}]);