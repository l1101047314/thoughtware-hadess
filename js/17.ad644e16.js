(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{380:function(e,t,n){},415:function(e,t,n){"use strict";n(367);var r=n(366),a=n(370),c=n.n(a),i=n(57),o=n.n(i),s=(n(158),n(68)),u=n(37),l=n.n(u),d=(n(231),n(159)),p=n(23),f=n.n(p),m=n(0),y=n.n(m),v=n(436),h=n(176),w=function(e){var t=e.totalPage,n=e.currentPage,r=e.handleTableChange,a=function(e){r(e)};return y.a.createElement("div",null,t>1&&y.a.createElement("div",{className:" flex justify-center  py-4 border-t space-x-3"},1===n?y.a.createElement(v.a,{className:"mt-1   text-gray-400"}):y.a.createElement(v.a,{className:"mt-1 cursor-pointer",disabled:!0,onClick:function(){return a(n-1)}}),y.a.createElement("div",null,"第",n,"页 / 共",t,"页"),n===t?y.a.createElement(h.a,{className:"mt-1 text-gray-400"}):y.a.createElement(h.a,{className:"mt-1 cursor-pointer",onClick:function(){return a(n+1)}})))},x=n(503),b=n(107),E=n(384),k=n(373),g=d.a.confirm;t.a=function(e){var t=e.versionId,n=e.type,a=e.repositoryId,i=Object(m.useState)([]),u=l()(i,2),d=u[0],p=u[1],v=Object(m.useState)(1),h=l()(v,2),I=h[0],N=h[1],P=Object(m.useState)(10),C=l()(P,1)[0],S=Object(m.useState)(0),j=l()(S,2),O=j[0],T=j[1],L=[{title:"版本",dataIndex:"version",width:"10%",render:function(e,t){return y.a.createElement("div",{className:"text-blue-500 cursor-pointer",onClick:function(){return D(t)}}," ",e)}},{title:"大小",dataIndex:"size",width:"10%"},{title:"推送人",dataIndex:["user","name"],width:"10%"},{title:"创建时间",dataIndex:"createTime",width:"10%"},{title:"操作",key:"activity",width:"10%",render:function(e,t){return y.a.createElement(s.a,{title:"删除"},y.a.createElement(x.a,{className:"cursor-pointer",onClick:function(){return J(t.id)}}))}}];Object(m.useEffect)(o()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(I);case 2:case"end":return e.stop()}}),e)}))),[]);var z=function(){var e=o()(f.a.mark((function e(n){var r,a,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,k.a.findLibraryVersion(r);case 4:if(0!==(a=e.sent).code){e.next=11;break}return c={libraryId:a.data.library.id,pageParam:{pageSize:C,currentPage:n}},e.next=9,k.a.findLibraryVersionPage(c);case 9:0===(i=e.sent).code&&(T(i.data.totalPage),p(i.data.dataList));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=o()(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1===d.length?"注意，该版本为唯一版本 删除后制品将完全被删除":"注意：删除版本后该版本不可恢复",g({title:n,icon:y.a.createElement(b.a,null),content:"",okText:"确认",okType:"danger",cancelText:"取消",onOk:function(){V(t)},onCancel:function(){}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=o()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var t=o()(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"repository"===n?e.history.push("/index/repository/".concat(a,"/libraryList/survey/").concat(r.id)):e.history.push("/index/library/librarySurvey/".concat(r.id));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(){var e=o()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(t),e.next=3,z(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return y.a.createElement("div",null,y.a.createElement(E.a,c()({type:n,classify:"history",versionId:t},e)),y.a.createElement(r.a,{dataSource:d,columns:L,pagination:!1}),y.a.createElement(w,{totalPage:O,currentPage:I,handleTableChange:F}))}},480:function(e,t,n){"use strict";n.r(t);var r=n(370),a=n.n(r),c=n(0),i=n.n(c),o=(n(380),n(415));t.default=function(e){var t=e.match.params;return i.a.createElement("div",{className:"repositoryLibrary"},i.a.createElement("div",{className:"repository-library-width"},i.a.createElement(o.a,a()({versionId:t.versionId,repositoryId:null==t?void 0:t.id,type:"repository"},e))))}}}]);