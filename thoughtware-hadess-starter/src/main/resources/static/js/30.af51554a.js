(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1120:function(e,t,a){"use strict";a(706)},1137:function(e,t,a){"use strict";a(431);var n=a(424),r=(a(402),a(403)),i=(a(404),a(405)),l=(a(469),a(468)),c=(a(421),a(422)),o=(a(179),a(64)),u=a(0),s=a.n(u),m=a(8),d=a(76),f=a(1174),M=a(177),N=a(394),y=a(89),T=a(395),g=a.n(T);a(706);function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function p(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,l,c=[],o=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=i.call(a)).done)&&(c.push(n.value),c.length!==t);o=!0);}catch(e){u=!0,r=e}finally{try{if(!o&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw r}}return c}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return j(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var D=function(e){var t=e.bgroup,a=void 0===t?"darth":t,T=e.children,v=O(Object(u.useState)(null),2),j=v[0],D=v[1],I=O(Object(u.useState)(null),2),z=I[0],h=I[1],w=O(Object(u.useState)([]),2),A=w[0],b=w[1],L=O(Object(u.useState)({}),2),x=L[0],k=L[1],S=O(Object(u.useState)(!1),2),Y=S[0],C=S[1],U=O(Object(u.useState)(!1),2),H=U[0],Q=U[1],G=O(Object(u.useState)(!0),2),F=G[0],R=G[1],_=window.location.origin;Object(u.useEffect)((function(){P()}),[]);var P=function(){m.Axios.post("/version/getVersion").then((function(e){0===e.code&&(k(e.data),localStorage.setItem(m.LOCALSTORAGE_KEY.VERSION_INFO,JSON.stringify(e.data)),e.data.expired||(B(),V())),R(!1)}))},B=function(){m.Axios.post("/licence/findUseLicence").then((function(e){0===e.code&&e.data&&h(e.data),6e3===e.code&&o.default.error(e.msg)}))},V=function(){m.Axios.post("/licence/findAllLicence").then((function(e){0===e.code&&D(e.data)}))},W={name:"file",action:_+("/"===_.substring(_.length-1,_.length)?"licence/import":"/licence/import"),onChange:function(e){var t=p(e.fileList);if(t=(t=t.slice(-1)).map((function(e){return e.response&&(e.url=e.response.url),e})),b(t),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){var a=e.file;return 0===a.response.code?(setTimeout((function(){b([]),P(),findProductAuthUserAll()}),1e3),o.default.success("licence导入成功")):o.default.error("licence导入失败：".concat(a.response.msg))}if("error"===e.file.status)return o.default.error("licence导入失败，请重新上传")}};return s.a.createElement(n.a,{spinning:F,tip:"导入licence中..."},s.a.createElement(r.default,{className:"thoughtware_version"},s.a.createElement(i.default,{sm:{span:24},xs:{span:24},md:{span:24},lg:{span:"16",offset:"4"},xl:{span:"14",offset:"5"}},s.a.createElement("div",{className:"thoughtware_version_container"},s.a.createElement(f.a,{firstItem:"版本与许可证"},s.a.createElement("div",{className:"thoughtware_version_up_btn"},2===(null==x?void 0:x.release)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,E({},W,{fileList:A}),s.a.createElement(M.a,{isMar:!x.expired,type:"primary"},"导入licence")),!x.expired&&s.a.createElement(s.a.Fragment,null,s.a.createElement(M.a,{onClick:function(){return Q(!0)}},"历史"),s.a.createElement(N.a,{visible:H,footer:null,onCancel:function(){return Q(!1)},destroyOnClose:!0,width:800,title:s.a.createElement("div",{className:"info-item-title-te-modal-title"},s.a.createElement("div",null,"更多详情"),s.a.createElement("div",{onClick:function(){return Q(!1)}},s.a.createElement(d.default,null)))},s.a.createElement("div",{className:"info-item-title-te-modal-info info-item-title-te-modal"},s.a.createElement("div",{className:"te-modal-info-item"},s.a.createElement("div",null,"生效时间"),s.a.createElement("div",null,"过期时间"),s.a.createElement("div",null,"用户数"),s.a.createElement("div",null,"状态")),j&&j.length>0?j.map((function(e,t){return s.a.createElement("div",{key:t,className:"te-modal-info-item"},s.a.createElement("div",null,g()(e.expiryTime).format("YYYY-MM-DD HH:mm:ss")),s.a.createElement("div",null,g()(e.issuedTime).format("YYYY-MM-DD HH:mm:ss")),s.a.createElement("div",null,e.userNum>0?e.userNum:"无限制"),s.a.createElement("div",null,1===e.state&&"已失效",2===e.state&&s.a.createElement("span",{className:"te-modal-info-item-blue"},"生效中"),3===e.state&&"未生效"))})):s.a.createElement("div",{className:"te-modal-info-item-empty"},"暂无历史"))))))),s.a.createElement("div",{className:"thoughtware_version-info"},s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"应用名称"),y.b[a]),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("div",{className:"info-item-title"},"版本类型"),1===(null==x?void 0:x.release)?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"info-item-info"},"社区版",s.a.createElement("span",{className:"info-item-title-te",onClick:function(){return C(!0)}},s.a.createElement("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzAyNTMzNDQ1Mzc5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjkwODciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUxMS45OTc3NiAwYTUxMS45OTc3NiA1MTEuOTk3NzYgMCAxIDEtMzM5LjM5MDUxNSA4OTUuMzU2MDgzIDMwLjI3MTg2OCAzMC4yNzE4NjggMCAwIDAgMjcuNzExODc5LTguMjU1OTY0TDQ4NC42MDU4OCA2MDIuODc3MzYyVjQ5Ny4yNzc4MjRsLTYuMTQzOTczLTAuOTU5OTk1LTYuMjA3OTczIDAuMzE5OTk4YTMwLjA3OTg2OCAzMC4wNzk4NjggMCAwIDAtMTYuNzY3OTI3IDguNTExOTYzTDEzNi45NTk0MDEgODIzLjY3NjM5NmwtMy45MDM5ODMgNC43OTk5NzlhMzAuMjcxODY4IDMwLjI3MTg2OCAwIDAgMC00LjM1MTk4MSAyMi44NDc5QTUxMS45OTc3NiA1MTEuOTk3NzYgMCAwIDEgNTExLjk5Nzc2IDB6IG04OS4wODc2MSAyNTMuMzEwODkyTDU1NC4yMzc1NzUgMzc2LjQ0NjM1M2wtMTI3Ljk5OTQ0IDMxLjIzMTg2MyAxMDIuNjU1NTUxIDgyLjU1OTYzOS05Ljc5MTk1NyAxMzEuMzkxNDI1IDExMC4yMDc1MTgtNzIuMDYzNjg0IDEyMS45MTk0NjYgNDkuOTE5NzgxLTM0LjU1OTg0OC0xMjcuMTAzNDQ0IDg1LjI0NzYyNy0xMDAuNDc5NTYtMTMxLjU4MzQyNS02LjUyNzk3Mi02OS4yNDc2OTctMTExLjk5OTUxek0zNTUuMDA2NDQ3IDEyNy45OTk0NGwtMzYuMDMxODQzIDY2LjYyMzcwOS03NS4yNjM2NyA4LjEyNzk2NCA1Mi4yMjM3NzEgNTQuODQ3NzYtMTUuNTUxOTMyIDc0LjE3NTY3NSA2OC4yODc3MDItMzIuNzY3ODU2IDY1LjcyNzcxMiAzNy43NTk4MzUtMTAuMDQ3OTU2LTc1LjEzNTY3MiA1Ni4xOTE3NTQtNTAuODE1Nzc3TDM4NS45MTgzMTIgMTk3LjExOTEzOCAzNTUuMDA2NDQ3IDEyNy45OTk0NHpNODI1LjU5NjM4OCAxOTkuOTM1MTI1bC0xNC4yMDc5MzggMjYuMzY3ODg1LTI5LjgyMzg2OSAzLjE5OTk4NiAyMC42NzE5MDkgMjEuNjk1OTA1LTYuMTQzOTczIDI5LjMxMTg3MiAyNy4wMDc4ODItMTIuOTI3OTQ0IDI1Ljk4Mzg4NiAxNC45MTE5MzUtMy45Njc5ODItMjkuNjk1ODcgMjIuMjA3OTAyLTIwLjA5NTkxMi0yOS40Mzk4NzEtNS40Mzk5NzYtMTIuMjg3OTQ2LTI3LjMyNzg4MXoiIGZpbGw9IiMyYzJjMmMiIHAtaWQ9IjkwODgiPjwvcGF0aD48L3N2Zz4=",alt:"企业版特性",height:14,width:14}))),s.a.createElement("div",{onClick:function(){var e=1===x.release?"ce":"ee";window.open("http:///thoughtware.cn/product/detail?code=".concat(a,"&type=").concat(e))},className:"info-item-action"},"升级"),s.a.createElement(N.a,{visible:Y,footer:null,onCancel:function(){return C(!1)},destroyOnClose:!0,width:800,title:s.a.createElement("div",{className:"info-item-title-te-modal-title"},s.a.createElement("div",null,"企业版特性"),s.a.createElement("div",{onClick:function(){return C(!1)}},s.a.createElement(d.default,null)))},s.a.createElement("div",{className:"info-item-title-te-modal"},T))):x.expired?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"info-item-info"},"企业版"),s.a.createElement("div",{className:"info-item-action",onClick:function(){window.open("http://thoughtware.cn/account/subscribe/info/".concat(a))}},"免费试用"),s.a.createElement("div",{className:"info-item-action",onClick:function(){window.open("http://thoughtware.cn/account/subscribe")}},"订阅")):s.a.createElement(s.a.Fragment,null,"企业版",s.a.createElement("div",{className:"info-item-action"},x.expired?null!=z&&z.tryApply?s.a.createElement(c.default,{color:"#ff4d4f"},"试用已过期"):s.a.createElement(c.default,{color:"#ff4d4f"},"订阅已过期"):null!=z&&z.tryApply?s.a.createElement(c.default,{color:"#5d70ea"},"试用中"):s.a.createElement(c.default,{color:"#5d70ea"},"订阅中")))),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"用户数"),1===x.release||x.expired?"不限制":(null==z?void 0:z.userNum)>0?z.userNum+"人":"无限制"),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"生效时间"),null!=z&&z.expiryTime?g()(null==z?void 0:z.expiryTime).format("YYYY-MM-DD HH:mm:ss"):"--"),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"过期时间"),null!=z&&z.issuedTime?g()(null==z?void 0:z.issuedTime).format("YYYY-MM-DD HH:mm:ss"):"--"))))))};t.a=D},383:function(e,t,a){"use strict";a.r(t),function(e){a(1120);var n,r=a(1137),i=(a(398),a(397)),l=a(0),c=a.n(l),o=a(219),u=a(76);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var m,d,f=function(e){var t=function(e){return e?c.a.createElement(o.a,{style:{color:"#0063FF"}}):c.a.createElement(u.default,{style:{color:"#ff0000"}})},a=[{title:"功能",dataIndex:"title",key:"title",colSpan:2,render:function(e,t,a){var n={children:e,props:{}};return 0===a&&(n.props.rowSpan=3),a>0&&a<3&&(n.props.rowSpan=0),3===a&&(n.props.rowSpan=2),a>3&&(n.props.rowSpan=0),n}},{title:"功能",dataIndex:"feature",key:"feature",colSpan:0},{title:"社区版",dataIndex:"ce",key:"ce",render:function(e){return t(e)}},{title:"企业版",dataIndex:"ee",key:"ee",render:function(e){return t(e)}}];return c.a.createElement(r.a,s({},e,{bgroup:"hadess"}),c.a.createElement(i.default,{bordered:!0,columns:a,dataSource:[{key:"1",title:"基本功能",feature:"LDAP",ce:!1,ee:!0},{key:"2",title:"基本功能",feature:"在线客服",ce:!1,ee:!0},{key:"3",title:"基本功能",feature:"用户和部门",ce:!0,ee:!0},{key:"4",title:"升级功能",feature:"插件",ce:!1,ee:!0},{key:"5",title:"升级功能",feature:"权限",ce:!0,ee:!0}],pagination:!1}))},M=f;t.default=M,(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(m.register(f,"VersionContent","/Users/limingliang/xcode-xpack/thoughtware-hadess-ui/src/setting/licence/Version.js"),m.register(M,"default","/Users/limingliang/xcode-xpack/thoughtware-hadess-ui/src/setting/licence/Version.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}.call(this,a(56)(e))},706:function(e,t,a){}}]);